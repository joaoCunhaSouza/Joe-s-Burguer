{% extends 'admin_custom/base.html' %}

{% block title %}{{ action }} Usuário da Cozinha - Admin{% endblock %}

{% block content %}
<div class="admin-card">
    <h2>{{ action }} Usuário da Cozinha</h2>
    
    <form method="post">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="username">Nome de Usuário *</label>
            <input 
                type="text" 
                name="username" 
                id="username"
                class="form-control" 
                value="{{ kitchen_user.username|default:'' }}"
                placeholder="ex: cozinha, atendente01, etc"
                required
                {% if kitchen_user %}readonly style="background: #f5f5f5;"{% endif %}
            />
            {% if kitchen_user %}
            <small style="color: #999; margin-top: 0.25rem; display: block;">
                O nome de usuário não pode ser alterado após a criação
            </small>
            {% else %}
            <small style="color: #999; margin-top: 0.25rem; display: block;">
                Este será o nome usado no login da cozinha
            </small>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label for="first_name">Nome Completo</label>
            <input 
                type="text" 
                name="first_name" 
                id="first_name"
                class="form-control" 
                value="{{ kitchen_user.first_name|default:'' }}"
                placeholder="ex: João da Silva"
            />
            <small style="color: #999; margin-top: 0.25rem; display: block;">
                Nome para identificação (opcional)
            </small>
        </div>
        
        <div class="form-group">
            <label for="email">E-mail</label>
            <input 
                type="email" 
                name="email" 
                id="email"
                class="form-control" 
                value="{{ kitchen_user.email|default:'' }}"
                placeholder="usuario@email.com"
            />
            <small style="color: #999; margin-top: 0.25rem; display: block;">
                E-mail opcional para contato
            </small>
        </div>
        
        <div class="form-group">
            <label for="password">Senha {% if not kitchen_user %}*{% endif %}</label>
            <input 
                type="password" 
                name="password" 
                id="password"
                class="form-control" 
                placeholder="{% if kitchen_user %}Deixe em branco para manter a senha atual{% else %}Digite a senha{% endif %}"
                {% if not kitchen_user %}required{% endif %}
                minlength="4"
            />
            {% if kitchen_user %}
            <small style="color: #999; margin-top: 0.25rem; display: block;">
                Preencha apenas se quiser alterar a senha
            </small>
            {% else %}
            <small style="color: #999; margin-top: 0.25rem; display: block;">
                Esta será a senha usada no login da cozinha (mínimo 4 caracteres)
            </small>
            {% endif %}
        </div>
        
        {% if not kitchen_user %}
        <div style="background: #d1ecf1; border: 1px solid #bee5eb; border-radius: 6px; padding: 1rem; margin: 1.5rem 0;">
            <strong style="color: #0c5460;">Dica:</strong>
            <p style="color: #0c5460; margin: 0.5rem 0 0 0;">
                Após criar o usuário, ele poderá fazer login em <code>/kitchen/login/</code> usando o <strong>Nome de Usuário</strong> e <strong>Senha</strong> definidos aqui.
            </p>
        </div>
        {% endif %}
        
        <div style="display: flex; gap: 1rem; margin-top: 2rem;">
            <button type="submit" class="btn btn-success">Salvar</button>
            <a href="{% url 'admin_kitchen_user_list' %}" class="btn btn-secondary">Cancelar</a>
        </div>
    </form>
</div>

{% if kitchen_user %}
<div class="admin-card">
    <h3 style="margin-bottom: 1rem;">Informações de Acesso</h3>
    <table style="width: auto;">
        <tr>
            <td style="font-weight: 600; padding-right: 2rem;">URL de Login:</td>
            <td><code>http://127.0.0.1:8000/kitchen/login/</code></td>
        </tr>
        <tr>
            <td style="font-weight: 600; padding-right: 2rem;">Usuário:</td>
            <td><code>{{ kitchen_user.username }}</code></td>
        </tr>
        <tr>
            <td style="font-weight: 600; padding-right: 2rem;">Senha:</td>
            <td><em style="color: #999;">••••••••</em></td>
        </tr>
    </table>
</div>
{% endif %}
{% endblock %}
